# Codebase Structure

**Analysis Date:** 2026-02-10

## Directory Layout

```
netflix-imdb/
├── src/                          # Application source code
│   ├── main.tsx                  # React DOM entry point
│   ├── App.tsx                   # Root component, state management
│   ├── index.css                 # Global styles, Tailwind directives, theme variables
│   ├── vite-env.d.ts             # Vite environment type definitions
│   ├── components/               # React components
│   │   ├── ui/                   # Radix UI primitives + styling
│   │   ├── movie-table.tsx       # Desktop table view
│   │   ├── movie-card.tsx        # Mobile card view
│   │   ├── movie-filters.tsx     # Filter UI and controls
│   │   ├── search-bar.tsx        # Search input with icon
│   │   ├── country-selector.tsx  # Country dropdown
│   │   ├── sortable-table-head.tsx # Clickable sort headers
│   │   ├── mobile-sort-selector.tsx # Mobile sort picker
│   │   └── loading-skeleton.tsx  # Loading state placeholders
│   ├── lib/                      # Utilities and data layer
│   │   ├── supabase.ts           # Supabase client, Movie type, fetch function
│   │   ├── filter-utils.ts       # Filter logic and metadata extraction
│   │   ├── sort-utils.ts         # Sorting logic
│   │   ├── countries.ts          # Country list and lookup
│   │   └── utils.ts              # Helper functions (cn classname merger)
│   ├── hooks/                    # Custom React hooks
│   │   └── use-local-storage.ts  # Generic localStorage state hook
│   ├── dist/                     # Build output (generated)
│   └── ...
├── scripts/                      # Utility scripts
│   └── sync-netflix-movies.ts    # TMDB/OMDb data sync to Supabase
├── supabase/                     # Supabase config
│   ├── migrations/               # Database migration files
│   └── config.toml               # Supabase local config
├── .env                          # Environment variables (not committed)
├── package.json                  # Dependencies and build scripts
├── tsconfig.json                 # TypeScript configuration with @ alias
├── vite.config.ts                # Vite build configuration
├── tailwind.config.ts            # Tailwind CSS config (if present)
├── postcss.config.js             # PostCSS config for Tailwind
└── .planning/                    # GSD documentation
    └── codebase/                 # Codebase analysis documents
```

## Directory Purposes

**src/:**
- Purpose: All TypeScript/TSX application code
- Contains: Components, utilities, hooks, styles
- Key files: `App.tsx` (root), `main.tsx` (entry), `index.css` (theme)

**src/components/:**
- Purpose: React functional components organized by responsibility
- Contains: UI components, composite components, layout components
- Key files: `movie-table.tsx`, `movie-card.tsx`, `movie-filters.tsx`

**src/components/ui/:**
- Purpose: Base UI primitives from Radix UI with custom Tailwind styling
- Contains: Button, Input, Select, Checkbox, Slider, Popover, Badge, Card, Table, Skeleton
- Pattern: Exported as composable building blocks for higher-level components

**src/lib/:**
- Purpose: Business logic, data access, and utilities
- Contains: Supabase client, filter/sort logic, country data, helper functions
- Key files: `supabase.ts` (data layer), `filter-utils.ts`, `sort-utils.ts`

**src/hooks/:**
- Purpose: Reusable stateful logic via custom React hooks
- Contains: useLocalStorage hook for persisting state
- Usage: Called from App component for filters and sort persistence

**scripts/:**
- Purpose: One-off utility scripts not part of app runtime
- Contains: Data sync script for seeding/updating Supabase
- Execution: Via `npm run sync` CLI command

**supabase/migrations/:**
- Purpose: Database schema and data structure changes
- Contains: SQL migration files (version control for schema)
- Generated by: Supabase CLI

**dist/:**
- Purpose: Production build output
- Contains: Compiled JS, CSS, and bundled assets
- Generated by: `npm run build` (vite build)
- Committed: No (in .gitignore)

## Key File Locations

**Entry Points:**
- `src/main.tsx`: Vite and React entry point, mounts App to DOM
- `src/App.tsx`: Root component with state management
- `scripts/sync-netflix-movies.ts`: CLI script for data synchronization

**Configuration:**
- `vite.config.ts`: Vite build and dev server configuration
- `tsconfig.json`: TypeScript compiler options, @ path alias
- `.env`: Environment variables (Supabase URL, API keys, TMDB/OMDb keys)
- `package.json`: Dependencies, scripts (dev, build, sync)

**Core Logic:**
- `src/lib/supabase.ts`: Data fetching and Movie type definition
- `src/lib/filter-utils.ts`: All filtering operations
- `src/lib/sort-utils.ts`: Sorting implementation
- `src/lib/countries.ts`: Static country configuration

**Styling:**
- `src/index.css`: Global styles, CSS variables for Y2K theme, Tailwind directives
- Individual component files: Inline Tailwind classes via className prop

**Testing:**
- No test files detected (testing not configured in this codebase)

## Naming Conventions

**Files:**
- React components: PascalCase.tsx (e.g., `MovieTable.tsx`, `SearchBar.tsx`)
- Utilities/helpers: kebab-case.ts (e.g., `filter-utils.ts`, `sort-utils.ts`)
- Hooks: kebab-case.ts starting with use- (e.g., `use-local-storage.ts`)
- UI components: kebab-case.tsx (e.g., `checkbox.tsx`, `slider.tsx`)

**Directories:**
- Components: lowercase singular/plural (components, ui, hooks, lib, scripts)
- Feature-based grouping not used; all components in flat components/ directory

**Functions:**
- Exported functions: camelCase, descriptive (fetchMoviesByCountry, applyFilters, sortMovies, getGenresFromMovies)
- Helper functions: camelCase, prefixed with verb (apply*, get*, sort*)
- React components: PascalCase (MovieTable, SearchBar, CountrySelector)

**Types/Interfaces:**
- PascalCase ending with Type/Props/Config pattern (MovieFilters, SortConfig, MovieTableProps, FilterChipProps)

**Variables:**
- State variables: camelCase (movies, filters, sortConfig, loading)
- Constants: UPPER_SNAKE_CASE (DEFAULT_COUNTRY, STORAGE_KEY, STREAMING_PROVIDER_INFO)

**CSS Classes:**
- Tailwind utility classes with custom variants: glass-card, text-gradient, cursor-glow, animate-reveal-stagger
- CSS custom properties for theme: --primary, --secondary, --neon-pink, --ease-expo-out

## Where to Add New Code

**New Feature (e.g., watch list, ratings):**
- Primary code: `src/components/` (new component files)
- Utilities: `src/lib/` (new utility file if complex logic)
- Hooks: `src/hooks/` (if stateful logic is reusable)
- Data layer: `src/lib/supabase.ts` (new query functions, types)

**New Component/Module:**
- UI primitive: Create in `src/components/ui/{component}.tsx`, export from barrel (if adding Radix wrapper)
- Feature component: Create in `src/components/{feature}.tsx`, import into App or parent component
- Page/layout: Not applicable (single-page app structure)

**Utilities:**
- Shared helpers: `src/lib/utils.ts` (small utilities like cn)
- Complex logic: New file in `src/lib/` with descriptive name (e.g., `rating-utils.ts`)
- Custom hooks: New file in `src/hooks/use-{feature}.ts`

## Special Directories

**dist/:**
- Purpose: Production build artifacts
- Generated: Yes (by Vite during build)
- Committed: No (.gitignore)

**node_modules/:**
- Purpose: Installed dependencies
- Generated: Yes (by npm/yarn/pnpm install)
- Committed: No (.gitignore)

**.git/:**
- Purpose: Git version control metadata
- Generated: Yes (by git init)
- Committed: No (version control system)

**supabase/migrations/:**
- Purpose: Track database schema changes
- Generated: Yes (by Supabase CLI when creating migrations)
- Committed: Yes (part of version control)

**.env (root):**
- Purpose: Local environment variables (secrets, API keys)
- Generated: Manual creation required
- Committed: No (.gitignore) — contains secrets

## Component Structure Pattern

All components follow this structure:

```typescript
// imports
import { useState, useEffect } from 'react'
import { Icon } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'

// props interface
interface ComponentNameProps {
  prop1: string
  prop2?: number
  onChange: (value: string) => void
}

// component
export function ComponentName({ prop1, prop2, onChange }: ComponentNameProps) {
  // hooks
  const [state, setState] = useState()

  // effects
  useEffect(() => {}, [])

  // handlers
  const handleClick = () => {}

  // render
  return (
    <div className={cn("base-class", "conditional-class")}>
      {/* JSX */}
    </div>
  )
}
```

## Styling Pattern

All styling uses Tailwind CSS classes:

```typescript
<div className={cn(
  // base styles
  "rounded-lg border",
  // responsive
  "md:px-4 sm:px-2",
  // conditional
  isActive && "bg-primary text-white",
  // custom utility via index.css
  "glass-card"
)}>
```

CSS custom properties defined in `src/index.css` for reusable design tokens (colors, animations, easing).
